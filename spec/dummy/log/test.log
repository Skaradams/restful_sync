Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (7.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (19.4ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (22.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (24.4ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "changed@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (1.7ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "changed@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (1.7ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "changed@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (1.7ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "changed@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (1.8ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "changed@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (1.6ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "changed@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.4ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.6ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.6ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (48.7ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.8ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.7ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", 0], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", 0], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", 0], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", 1], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", 0], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", 1], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", 0], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", 0], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", 0], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", 1], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", 0], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", 1], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.4ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.5ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)  [["name", "brand1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)  [["name", "brand1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)  [["name", "brand1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_brands" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)  [["name", "brand1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_brands" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "brand1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)  [["name", "product1"], ["user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product2"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)  [["name", "product1"], ["user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product2"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product1"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product1"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)  [["name", "product2"], ["user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.1ms)[0m  INSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)  [["name", "product1"], ["user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product2"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)  [["name", "product1"], ["user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product2"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product1"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)[0m  [["name", "product1"], ["user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "user_id") VALUES (?, ?)  [["name", "product2"], ["user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
SQLite3::SQLException: no such column: test_products.test_user_id: SELECT "test_products".* FROM "test_products"  WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.8ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "product1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "product1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.6ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.7ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 0]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.7ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 0]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (35.9ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.7ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (2.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.3ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by RestfulSync::ApiController#create as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by RestfulSync::ApiController#create as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"NilClass"}
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"NilClass", "params"=>{}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"NilClass", "api"=>{}}
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"NilClass", "api"=>{}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"NilClass", "api"=>{}}
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"NilClass", "api"=>{}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 4.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 4.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", nil]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.3ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 4.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 48ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.2ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com"}}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.5ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com"}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (21.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.3ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "test_user_id"=>"1", "property_ids"=>[]}, "1"=>{"id"=>"2", "name"=>"name2", "test_user_id"=>"1", "property_ids"=>[]}}}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 40ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (35.3ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "test_user_id"=>"1", "property_ids"=>[]}, "1"=>{"id"=>"2", "name"=>"name2", "test_user_id"=>"1", "property_ids"=>[]}}}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 10ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.7ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "test_user_id"=>"1", "property_ids"=>[]}, "1"=>{"id"=>"2", "name"=>"name2", "test_user_id"=>"1", "property_ids"=>[]}}}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.7ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "test_user_id"=>"1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "test_user_id"=>"1", "property_ids"=>["2"]}}}}
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.3ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "test_user_id"=>"1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "test_user_id"=>"1", "property_ids"=>["2"]}}}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (14.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (36.4ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "test_user_id"=>"1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "test_user_id"=>"1", "property_ids"=>["2"]}}}}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.7ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (36.3ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (41.2ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.7ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (36.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"email"=>"test@test.com", "products_attributes"=>{"0"=>{"name"=>"name1", "property_ids"=>["1"]}, "1"=>{"name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 3 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 2]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 4 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 8ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.7ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 141ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 9ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_users" ("email", "id") VALUES (?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 8ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (8.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.3ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 9ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 19ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 19ms
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 10ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 19ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 18ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.3ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 18ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 18ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 10ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.7ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" 
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" [0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_properties" WHERE "test_properties"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_properties" WHERE "test_properties"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" 
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_properties" WHERE "test_properties"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_properties" WHERE "test_properties"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)[0m  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 14ms
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" [0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_properties" WHERE "test_properties"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_properties" WHERE "test_properties"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.7ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" IS NULL
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)  [["id", 1], ["name", "name1"], ["test_user_id", 1]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "test_products" ("id", "name", "test_user_id") VALUES (?, ?, ?)
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 18ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.7ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.5ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.2ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser"}
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}, "id"=>"1"}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}, "id"=>"1"}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1"}, "id"=>"1"}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.3ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}, "id"=>"1"}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (11.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.2ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>nil}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.7ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (34.9ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (40.8ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.2ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (35.4ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.2ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (43.6ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.2ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 44ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (4.6ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 2]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (41.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (5.8ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 14ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 2]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (41.5ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 2]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.2ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "role1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 2]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.5ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "role1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 2]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "role1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.8ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.4ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.2ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.2ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.2ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "role1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 2]]
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 54ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.6ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.2ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.6ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.2ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 55ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "test@test.com"], ["id", 1]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email", "id") VALUES (?, ?)[0m  [["email", "changed@test.com"], ["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"changed_product", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "changed_product"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_products" WHERE "test_products"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_products" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "test_products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "test_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "test_properties" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_product_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "test_roles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "test_user_id" integer) [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_users" SET "email" = 'changed@test.com' WHERE "test_users"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_roles" ("name", "test_user_id") VALUES (?, ?)  [["name", "role1"], ["test_user_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_roles" SET "test_user_id" = 1 WHERE "test_roles"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_products" SET "test_user_id" = 1 WHERE "test_products"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", nil]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", nil]]
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "test@test.com"], ["id", 1]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#update as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"changed@test.com", "products_attributes"=>{}}}
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email", "id") VALUES (?, ?)  [["email", "changed@test.com"], ["id", 1]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"changed_product", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[35mTestProperty Load (0.1ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTestProperty Load (0.0ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "changed_product"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" LIMIT 1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{}}
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{}}}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
Processing by RestfulSync::ApiController#create as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>nil, "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>nil, "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>nil, "name"=>"name2", "property_ids"=>["2"]}}}}
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTestProperty Load (0.0ms)[0m  SELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTestUser Load (0.1ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name1"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)  [["name", "name2"], ["test_user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mUPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"2"}
  [1m[35mTestUser Load (0.1ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name2"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 0]]
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{}}, "id"=>"1"}
  [1m[35mTestUser Load (0.0ms)[0m  SELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_users" WHERE "test_users"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_users" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)  [["name", "name1"], ["test_product_id", nil]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_properties" ("name", "test_product_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_product_id", nil]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name1"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 1 WHERE "test_properties"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "test_products" ("name", "test_user_id") VALUES (?, ?)[0m  [["name", "name2"], ["test_user_id", 1]]
  [1m[35m (0.1ms)[0m  UPDATE "test_properties" SET "test_product_id" = 2 WHERE "test_properties"."id" = 2
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestfulSync::ApiController#destroy as HTML
  Parameters: {"model"=>"TestUser", "api"=>{"id"=>"1", "email"=>"test@test.com", "products_attributes"=>{"0"=>{"id"=>"1", "name"=>"name1", "property_ids"=>["1"]}, "1"=>{"id"=>"2", "name"=>"name2", "property_ids"=>["2"]}}}, "id"=>"1"}
  [1m[36mTestUser Load (0.0ms)[0m  [1mSELECT "test_users".* FROM "test_users" WHERE "test_users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 1]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "test_products" WHERE "test_products"."id" = ?  [["id", 2]]
  [1m[36mTestProperty Load (0.1ms)[0m  [1mSELECT "test_properties".* FROM "test_properties" WHERE "test_properties"."test_product_id" = 2[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "test_users" WHERE "test_users"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "test_users" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "test_products" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "test_users" ("email") VALUES (?)  [["email", "test@test.com"]]
  [1m[36mTestProduct Load (0.1ms)[0m  [1mSELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1[0m
  [1m[35mTestRole Load (0.1ms)[0m  SELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "test_users" ("email") VALUES (?)[0m  [["email", "test@test.com"]]
  [1m[35mTestProduct Load (0.1ms)[0m  SELECT "test_products".* FROM "test_products" WHERE "test_products"."test_user_id" = 1
  [1m[36mTestRole Load (0.1ms)[0m  [1mSELECT "test_roles".* FROM "test_roles" WHERE "test_roles"."test_user_id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
